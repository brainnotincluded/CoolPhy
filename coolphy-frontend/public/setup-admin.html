<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup Admin Access - CoolPhy</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #0a0a0a;
            color: #ededed;
        }
        .card {
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
        }
        h1 {
            color: #3b82f6;
            margin-bottom: 10px;
        }
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .alert-info {
            background: #3b82f614;
            border: 1px solid #3b82f633;
            color: #3b82f6;
        }
        .alert-success {
            background: #10b98114;
            border: 1px solid #10b98133;
            color: #10b981;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-top: 10px;
        }
        button:hover {
            background: #2563eb;
        }
        .code {
            background: #0a0a0a;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin-top: 10px;
        }
        .status {
            display: none;
            margin-top: 15px;
        }
        .status.show {
            display: block;
        }
        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #2a2a2a;
            border-radius: 6px;
            background: #0a0a0a;
            color: #ededed;
            font-size: 16px;
            margin-bottom: 10px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #ededed;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>üîß Setup Admin Access</h1>
        <p>This is a development tool to set up admin credentials for local testing.</p>
        
        <div class="alert alert-info">
            <strong>‚ö†Ô∏è Development Only!</strong><br>
            This should only be used for local development. In production, admin users should be created through the backend.
        </div>

        <label for="email">Admin Email:</label>
        <input type="email" id="email" value="vorobyev.daniil.v@gmail.com" placeholder="Enter admin email">

        <label for="name">Admin Name:</label>
        <input type="text" id="name" value="Daniil Vorobyev" placeholder="Enter admin name">

        <button onclick="setupAdmin()">üöÄ Setup Admin Access</button>

        <div id="status" class="status"></div>
    </div>

    <div class="card">
        <h2>üìù Manual Setup</h2>
        <p>If the button doesn't work, open your browser console (F12) and run:</p>
        <div class="code" id="manualCode"></div>
    </div>

    <script>
        function updateManualCode() {
            const email = document.getElementById('email').value || 'vorobyev.daniil.v@gmail.com';
            const name = document.getElementById('name').value || 'Daniil Vorobyev';
            
            document.getElementById('manualCode').textContent = `localStorage.setItem('auth_token', 'dev-admin-token');
localStorage.setItem('user', JSON.stringify({
  id: 1,
  email: '${email}',
  name: '${name}',
  role: 'admin',
  points: 1000,
  subjects: ['math', 'physics', 'cs'],
  achievements: {},
  settings: {},
  created_at: '${new Date().toISOString()}',
  updated_at: '${new Date().toISOString()}'
}));
location.href = '/admin/dashboard';`;
        }

        function setupAdmin() {
            const email = document.getElementById('email').value;
            const name = document.getElementById('name').value;

            if (!email || !name) {
                alert('Please fill in both email and name');
                return;
            }

            // Set admin credentials
            localStorage.setItem('auth_token', 'dev-admin-token');
            localStorage.setItem('user', JSON.stringify({
                id: 1,
                email: email,
                name: name,
                role: 'admin',
                points: 1000,
                subjects: ['math', 'physics', 'cs'],
                achievements: {},
                settings: {},
                created_at: new Date().toISOString(),
                updated_at: new Date().toISOString()
            }));

            // Show success message
            const status = document.getElementById('status');
            status.className = 'status show alert alert-success';
            status.innerHTML = `
                <strong>‚úÖ Success!</strong><br>
                Admin access has been set up for <strong>${email}</strong><br>
                <br>
                Redirecting to admin dashboard in 2 seconds...
            `;

            // Redirect to admin dashboard
            setTimeout(() => {
                window.location.href = '/admin/dashboard';
            }, 2000);
        }

        // Update manual code when inputs change
        document.getElementById('email').addEventListener('input', updateManualCode);
        document.getElementById('name').addEventListener('input', updateManualCode);
        
        // Initialize manual code
        updateManualCode();
    </script>
</body>
</html>
